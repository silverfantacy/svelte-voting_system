{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../CreatePollForm.svelte",
    "../../Footer.svelte",
    "../../Header.svelte",
    "../../PollDetails.svelte",
    "../../PollList.svelte",
    "../../Button.svelte",
    "../../Card.svelte",
    "../../Tabs.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import Header from \"./components/Header.svelte\";\n  import Footer from \"./components/Footer.svelte\";\n  import Tabs from \"./shared/Tabs.svelte\";\n  import CreatePollForm from \"./components/CreatePollForm.svelte\";\n  import PollList from \"./components/PollList.svelte\";\n  import PollStore from './stores/Polltore.js'\n\n  // tabs\n  let items = [\"Current Polls\", \"Add new Poll\"];\n  let activeItem = \"Current Polls\";\n\n  const tabChange = e => {\n    console.log(\"tabChange\", e);\n    activeItem = e.detail;\n  };\n\n  const handleAdd = e => {\n    // 使用 store 後只負責跳轉\n    activeItem = \"Current Polls\"; // 切換顯示元件\n  };\n\n\n  // Your web app's Firebase configuration\n  var firebaseConfig = {\n    apiKey: process.env.apiKey,\n    authDomain: process.env.authDomain,\n    databaseURL: process.env.databaseURL,\n    projectId: process.env.projectId,\n    storageBucket: process.env.storageBucket,\n    messagingSenderId: process.env.messagingSenderId,\n    appId: process.env.appId,\n    measurementId: process.env.measurementId\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n  firebase.analytics();\n\n  window.db = firebase.firestore().collection(\"Polls\");\n\n  // 啟動時取得 db 資料複寫\n  let dbData = [];\n  db.orderBy(\"id\", \"desc\").get()\n    .then(async (querySnapshot) => {\n      // console.log('querySnapshot',querySnapshot)\n      await querySnapshot.forEach(doc => {\n        // console.log(doc.id, doc.data());\n        dbData = [...dbData, doc.data()]\n        \n      });\n      // await console.log('dbData',dbData);\n      await PollStore.set(dbData)  // 把 dbDate 直接寫入 store\n    })\n    .catch((error)=> {\n      console.log(error)\n    })\n\n</script>\n\n<style>\n  main {\n    max-width: 960px;\n    margin: 40px auto;\n  }\n</style>\n\n<Header />\n<main>\n\n  <Tabs {activeItem} {items} on:tabChange={tabChange} />\n\n  {#if activeItem === 'Current Polls'}\n    <PollList />\n  {:else if activeItem === 'Add new Poll'}\n    <CreatePollForm on:add={handleAdd} />\n  {/if}\n</main>\n<Footer />\n",
    "<script>\n  import PollStore from '../stores/Polltore.js'\n  import { createEventDispatcher } from \"svelte\";\n  import Button from \"../shared/Button.svelte\";\n\n  const dispatch = createEventDispatcher();  // 呼叫父層function用\n\n  let fields = {\n    question: \"\",\n    answerA: \"\",\n    answerB: \"\"\n  };\n  let errors = {\n    question: \"\",\n    answerA: \"\",\n    answerB: \"\"\n  };\n  let valid = false;\n\n  const submitHandler = () => {\n    console.log(\"submitHandler=>\", fields);\n\n    valid = true;\n\n    // validate question\n    if (fields.question.trim().length < 5) {\n      valid = false;\n      errors.question = \"Question must be at least 5 characters\";\n    } else {\n      errors.question = \"\";\n    }\n\n    // validate answer A\n    if (fields.answerA.trim().length < 1) {\n      valid = false;\n      errors.answerA = \"answer A cannnot be empty\";\n    } else {\n      errors.answerA = \"\";\n    }\n\n    // validate answer B\n    if (fields.answerB.trim().length < 1) {\n      valid = false;\n      errors.answerB = \"answer B cannnot be empty\";\n    } else {\n      errors.answerB = \"\";\n    }\n\n    // add new poll\n    if (valid) {\n      let poll = {...fields, votesA: 0, votesB: 0, id: Date.now()}\n      // let poll = {...fields, votesA: 0, votesB: 0, id: Math.random()}\n      // console.log(\"valid\", fields);\n      console.log(\"poll\", poll);\n      // dispatch('add', poll);\n\n      // save poll to store, currentPolls是當前store內的值\n      PollStore.update( currentPolls => {\n        return [poll, ...currentPolls];\n      })  //直接寫入 store\n\n      // 寫入 db 紀錄\n      db.doc(poll.id.toString()).set(JSON.parse(JSON.stringify(poll)))\n        // .then((response) => console.log(\"db\", response))\n        // .catch((error) => console.log(\"db\", error))\n\n      dispatch('add');  // add 只負責跳轉了\n    }\n  };\n</script>\n\n<style>\n  form {\n    width: 400px;\n    margin: 0 auto;\n    text-align: center;\n  }\n  .form-field {\n    margin: 18px auto;\n  }\n  input {\n    width: 100%;\n    border-radius: 6px;\n  }\n  label {\n    margin: 10px auto;\n    text-align: left;\n  }\n  .error {\n    font-weight: bold;\n    font-size: 12px;\n    color: #d91b42;\n  }\n</style>\n\n<form on:submit|preventDefault={submitHandler}>\n  <div class=\"form-field\">\n    <label for=\"question\">Poll question:</label>\n    <input type=\"text\" id=\"question\" bind:value={fields.question} />\n    <div class=\"error\">{errors.question}</div>\n  </div>\n  <div class=\"form-field\">\n    <label for=\"answer-a\">answer A:</label>\n    <input type=\"text\" id=\"answer-a\" bind:value={fields.answerA} />\n    <div class=\"error\">{errors.answerA}</div>\n  </div>\n  <div class=\"form-field\">\n    <label for=\"answer-b\">answer B:</label>\n    <input type=\"text\" id=\"answer-b\" bind:value={fields.answerB} />\n    <div class=\"error\">{errors.answerB}</div>\n  </div>\n\n  <Button type=\"secondary\" flat={true}>Add Poll</Button>\n  <!-- <Button type=\"secondary\" flat={true} inverse={true}>Add Poll</Button> -->\n</form>\n",
    "<script>\n  // your script goes here\n</script>\n\n<style>\n  /* your styles go here */\n  footer {\n    padding: 40px;\n    text-align: center;\n  }\n\n  .copyright {\n    color: #aaa;\n    font-size: 14px;\n    display: inline-block;\n    padding: 20px;\n    border-top: 1px solid #ddd;\n  }\n</style>\n\n<footer>\n  <div class=\"copyright\">Copyright &copy; 2020 Zero 學習使用</div>\n</footer>\n",
    "<script>\n  // your script goes here\n</script>\n\n<style>\n  header {\n    background: #f7f7f7;\n    padding: 20px;\n  }\n\n  h1 {\n    margin: 0;\n    text-align: center;\n  }\n\n  img {\n    max-width: 180px;\n  }\n</style>\n\n<header>\n  <h1>\n    <img src=\"./img/fubuki.png\" alt=\"FBK\" />\n  </h1>\n</header>\n",
    "<script>\n  import PollStore from \"../stores/Polltore.js\";\n  import Card from \"../shared/Card.svelte\";\n  import Button from '../shared/Button.svelte';\n  import {tweened} from 'svelte/motion';\n\n  export let poll;\n\n  // reactive values\n  $: totalVotes = poll.votesA + poll.votesB;\n  $: percentA = Math.floor((100 / totalVotes) * poll.votesA) || 0;\n  $: percentB = Math.floor((100 / totalVotes) * poll.votesB) || 0;\n\n  // tweened percentages\n  const tweenedA = tweened(0);\n  const tweenedB = tweened(0);\n  $: tweenedA.set(percentA);\n  $: tweenedB.set(percentB);\n  // $: console.log(\"tweened\",$tweenedA,$tweenedB)\n\n  // handling Votes\n  const handleVote = (option, id) => {\n    PollStore.update(currentPolls => {\n      let copiedPolls = [...currentPolls];\n      let upvotedPoll = copiedPolls.find(poll => poll.id == id);\n\n      if (option === \"a\") {\n        upvotedPoll.votesA++;\n      }\n      if (option === \"b\") {\n        upvotedPoll.votesB++;\n      }\n\n      // 新增 db 資料\n      db.doc(upvotedPoll.id.toString()).update(upvotedPoll)\n\n      return copiedPolls;\n    });\n  };\n\n  // handleDelete\n  const handleDelete = (id) => {\n    PollStore.update(currentPolls => {\n\n      // 刪除 db 資料\n      db.doc(id.toString()).delete()\n        .then((result) => {\n          console.log('刪除成功')\n        }).catch((err) => {\n          console.log('刪除失敗')\n        });\n\n      return currentPolls.filter(poll => poll.id != id);\n    })\n  }\n</script>\n\n<style>\n  h3 {\n    margin: 0 auto;\n    color: #555;\n  }\n  p {\n    margin-top: 6px;\n    font-size: 14px;\n    color: #aaa;\n    margin-bottom: 30px;\n  }\n  .answer {\n    background: #fafafa;\n    cursor: pointer;\n    margin: 10px auto;\n    position: relative;\n  }\n  .answer:hover {\n    opacity: 0.6;\n  }\n  span {\n    display: inline-block;\n    padding: 10px 20px;\n  }\n  .percent {\n    height: 100%;\n    position: absolute;\n    box-sizing: border-box;\n  }\n  .percent-a {\n    border-left: 4px solid #d91b42;\n    background: rgba(217, 27, 66, 0.2);\n  }\n  .percent-b {\n    border-left: 4px solid #45c496;\n    background: rgba(69, 196, 150, 0.2);\n  }\n  .delete {\n    margin-top: 30px;\n    text-align: center;\n  }\n</style>\n\n<Card>\n  <div class=\"poll\">\n    <h3>{poll.question}</h3>\n    <p>總投票數：{totalVotes}</p>\n    <div class=\"answer\" on:click={() => handleVote('a', poll.id)}>\n      <div class=\"percent percent-a\" style=\"width: {$tweenedA}%\" />\n      <span>{poll.answerA} ({poll.votesA})</span>\n    </div>\n\n    <div class=\"answer\" on:click={() => handleVote('b', poll.id)}>\n      <div class=\"percent percent-b\" style=\"width: {$tweenedB}%\" />\n      <span>{poll.answerB} ({poll.votesB})</span>\n    </div>\n\n    <div class=\"delete\">\n      <Button flat={true} on:click={() => handleDelete(poll.id)}>刪除</Button>\n    </div>\n\n  </div>\n</Card>\n",
    "<script>\n  // import { onMount, onDestroy } from \"svelte\";  // 生命週期\n  import { fade, slide, scale } from \"svelte/transition\";\n  import { flip } from \"svelte/animate\";\n  import PollStore from \"../stores/Polltore.js\";\n  import PollDetails from \"./PollDetails.svelte\";\n\n  // export let polls = []; // 承接父層參數\n\n  // const unsub = PollStore.subscribe(data => {\n  //   // 使用 subscribe 取出 store 的值\n  //   polls = data;\n  // });\n\n  // 生命週期\n  // onMount(() => {\n  //   console.log(\"component mounted\");\n  // });\n  // onDestroy(() => {\n  //   console.log(\"component destroyed\");\n  //   unsub();\n  // });\n</script>\n\n<style>\n  .poll-list {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 20px;\n  }\n</style>\n\n<div class=\"poll-list\">\n  {#each $PollStore as poll (poll.id)}\n    <div in:fade out:scale|local animate:flip={{ duration: 500 }}>\n      <PollDetails {poll} />\n    </div>\n  {/each}\n</div>\n",
    "<script>\n  export let type = \"primary\";\n  export let flat = false;\n  export let inverse = false;\n</script>\n\n<style>\n  button {\n    border: 0;\n    cursor: pointer;\n    border-radius: 6px;\n    padding: 8px 12px;\n    font-weight: bold;\n    box-shadow: 1px 2px 3px rgba(0, 0, 0, 0.2);\n  }\n\n  .primary {\n    background: #d91b42;\n    color: white;\n  }\n\n  .secondary {\n    background: #45c496;\n    color: white;\n  }\n  .flat {\n    box-shadow: none;\n  }\n  .primary.inverse {\n    background: white;\n    color: #d91b42;\n    border: 2px solid #d91b42;\n  }\n  .secondary.inverse {\n    background: white;\n    color: #45c496;\n    border: 2px solid #45c496;\n  }\n</style>\n\n<!-- 添加 click 事件 -->\n<button class={type} class:flat class:inverse on:click>\n  <slot />\n</button>\n",
    "<div class=\"card\">\n  <!-- 放置內容物 -->\n  <slot></slot>  \n</div>\n\n<style>\n  .card {\n    background: #fff;\n    padding: 20px;border-radius: 6px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  }\n</style>",
    "<script>\n  import { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n\n  export let items;\n  export let activeItem;\n</script>\n\n<style>\n  .tabs {\n    margin-bottom: 40px;\n  }\n  ul {\n    display: flex;\n    justify-content: center;\n    padding: 0;\n    list-style: none;\n  }\n  li {\n    margin: 0 16px;\n    font-size: 18px;\n    color: #555;\n    cursor: pointer;\n  }\n  .active {\n    color: #d91b42;\n    border-bottom: 2px solid #d91b42;\n    padding-bottom: 8px;\n  }\n</style>\n\n<div class=\"tabs\">\n  <ul>\n    {#each items as item}\n      <li on:click={() => dispatch('tabChange', item)}>\n        <div class:active={item === activeItem}>{item}</div>\n      </li>\n    {/each}\n  </ul>\n</div>\n"
  ],
  "names": [],
  "mappings": "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"
}